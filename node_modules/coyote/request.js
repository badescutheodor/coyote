'use strict';

const Methods = {
    /**
     * Returns the ip of a request or checks if the
     * ip is same with the requested one
     * @param req
     */
    ip(ip)
    {
        if ( ip )
        {
            return Request.req.connection.remoteAddress === ip;
        }

        return Request.req.connection.remoteAddress;
    },

    /**
     * Checks weather a request is of type method
     * or returns the method of the request
     */
    method(method)
    {
        if ( method )
        {
            return method.toUpperCase() === Request.method;
        }

        return Request.method;
    }
};

class Request
{
    /**
     * Bind request custom methods
     * @param req
     * @returns {*}
     */
    static bind(req)
    {
        Request.req    = req;
        Request.method = req.method;

        for(var method in Methods)
        {
            Request.req[method] = Methods[method];
        }

        return Request.req;
    }
}

module.exports = Request;