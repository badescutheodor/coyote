'use strict';

const fs = require('fs');

class Static
{
    constructor(folder)
    {
        this.folder = folder;
    }

    handle()
    {
        let folder = this.folder;

        return (req, res, next) => {
            fs.readFile(`${folder}/${req.file}`, (e, r) => {
                if ( e )
                {
                    res.end();
                    return;
                }

                res.writeHead(200);
                res.end(r);
            });

            next(false);
        }
    }
}

module.exports = Static;